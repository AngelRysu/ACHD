{% extends 'layout.html' %}
{% block title %}carreras{% endblock %}

{% block body_class %}admincarreras{% endblock %}

{% block css %}
<style>
    body {
        font-family: Montserrat, Arial;
    }

    .container {
        width: 80%;
        margin: 0 auto;
        margin-top: 3vh;
        display: flex;
        justify-content: space-between;
        align-items: center;
        /* Centrar verticalmente los botones */
        flex-wrap: wrap;
        /* Permitir envolver en varias líneas si es necesario */
    }

    .header-container {
        width: 48%;
        /* Ajustar según sea necesario */
        text-align: center;
        margin-bottom: 10px;
        /* Ajustar según sea necesario */
    }

    .content-container {
        width: 100%;
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        /* Permitir envolver en varias líneas si es necesario */
    }

    .table-container {
        width: 48%;
        /* Ajustar según sea necesario */
        max-height: 60vh;
        overflow-y: auto;
        margin-bottom: 20px;
    }

    .myTable {
        width: 100%;
        border-collapse: collapse;
    }

    .myTable th {
        background-color: blueviolet;
        padding: 8px;
        color: white;
        font-weight: 100;
        font-size: 14px;
    }

    .myTable td,
    th {
        border: 1px solid #ddd;
        padding: 6px;
    }

    .myTable td {
        padding: 4px;
    }

    .myTable tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    .myTable tr:nth-child(odd) {
        background-color: #e0e0e0;
        /* Fondo gris para las filas impares */
    }

    .action-btn {
        width: 167px;
        height: 46px;
        border-radius: 23px;
        background-color: blueviolet;
        color: white;
        font-size: 17px;
        font-weight: bold;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .action-btn:last-child {
        margin-right: 0;
        /* Eliminar margen derecho del último botón */
    }

    .action-btn:hover {
        background-color: #5d478b;
    }

    /* Estilos para los botones de la parte superior */
    .top-buttons {
        text-align: center;
        width: 100%;
        /* Ajustar al ancho máximo */
        margin-bottom: 20px;
        /* Espacio entre los botones y las tablas */
    }

    .button-container {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-top: 20px;
        /* Ajustar según sea necesario */
        margin-bottom: 20px;
        /* Ajustar según sea necesario */
    }
</style>
{% endblock %}

{% block content %}
<section id="table">
    <div class="top-buttons">
        <button class="action-btn" id="modificarBtn" data-carrera-id="{{ carreraID }}">Modificar Carrera</button>
    </div>
    <div class="container">
        <div class="header-container">
            <h2 style="color: white;">Docentes asociados a la carrera</h2>
        </div>
        <div class="header-container">
            <h2 style="color: white;">Materias asignadas a la carrera</h2>
        </div>
        <div class="content-container">
            <div class="table-container">
                <table class="myTable">
                    <tr>
                        <th>Nombre</th>
                    </tr>
                    {% for docente in docentes %}
                    <tr>
                        <td>{{ docente.usuario.apellido_pat }} {{
                            docente.usuario.apellido_mat}} {{ docente.usuario.nombre }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            <div class="table-container">
                <table class="myTable">
                    <tr>
                        <th>Nombre</th>
                        <th>Clave</th>
                        <th>Semestre</th>
                        <th>Horas Práctica</th>
                        <th>Horas Teoría</th>
                        <th>Créditos</th>
                    </tr>
                    {% for materia in materias %}
                    <tr>
                        <td>{{ materia.materia.nombre }}</td>
                        <td>{{ materia.materia.clave }}</td>
                        <td>{{ materia.materia.semestre }}</td>
                        <td>{{ materia.materia.horas_practica }}</td>
                        <td>{{ materia.materia.horas_teoria }}</td>
                        <td>{{ materia.materia.creditos }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="button-container">
            <button class="action-btn" onclick="location.href='/carrera/{{ carreraID }}/asociar/docentes'">Asociar
                Docente</button>
            <button class="action-btn" onclick="location.href='/carrera/{{ carreraID }}/asociar/materias'">Asociar
                Materia</button>
        </div>
    </div>
</section>

<script>

    var modificarBtn = document.getElementById("modificarBtn");
    modificarBtn.addEventListener("click", function () {
        // Obtiene el ID de la carrera del atributo data-carrera-id del botón
        var carreraId = modificarBtn.getAttribute("data-carrera-id");

        // Construye la URL con el ID de la carrera
        var url = "/admin/modificar/carrera/" + carreraId;

        // Redirige a la URL construida
        window.location.href = url;
    });
</script>
{% endblock %}